<?php
namespace Piggly\Tests\ValueTypes\Advanced;

use PHPUnit\Framework\TestCase;
use Piggly\ValueTypes\Advanced\CpfType;

/**
 * @coversDefaultClass \Piggly\ValueTypes\Advanced\CpfType
 */
class CpfTypeTest extends TestCase
{
	/**
	 * Assert if $value is validated as $expected.
	 *
	 * @covers ::validate
	 * @covers ::assert
	 * @covers ::__construct
	 * @dataProvider dataValues
	 * @test Expecting positive assertion.
	 * @param boolean $expected Expected result.
	 * @param boolean $value Value to validate
	 * @return boolean
	 */
	public function canValidate ( bool $expected, string $value )
	{ $this->assertEquals($expected, (new CpfType($value))->validate()); }

	/**
	 * Assert if $value is masked as $expected.
	 *
	 * @covers ::masked
	 * @covers ::__construct
	 * @dataProvider dataToMask
	 * @test Expecting positive assertion.
	 * @param string $expected Expected result.
	 * @param string $value Value to validate
	 * @return boolean
	 */
	public function canMask ( string $expected, string $value, bool $keepLenght = true )
	{ $this->assertEquals($expected, (new CpfType($value))->masked($keepLenght)); }

	/**
	 * A list with random values to validate.
	 * Provider to canValidate() method.
	 * - Generated by fakerphp.
	 * @return array
	 */
	public function dataValues () : array
	{
		return [
			// Valid
			[true, '354.060.756-08'],
			[true, '692.698.149-39'],
			[true, '411.811.468-28'],
			[true, '982.836.417-43'],
			[true, '897.433.091-10'],
			[true, '481.770.669-43'],
			[true, '702.491.180-84'],
			[true, '405.226.979-92'],
			[true, '179.140.675-04'],
			[true, '497.858.324-14'],
			[true, '644.076.930-88'],
			[true, '137.774.053-61'],
			[true, '456.182.249-68'],
			[true, '457.497.562-89'],
			[true, '181.290.021-08'],
			[true, '081.420.385-01'],
			[true, '540.261.628-00'],
			[true, '589.590.155-71'],
			[true, '850.408.524-44'],
			[true, '784.318.713-85'],
			[true, '619.783.787-00'],
			[true, '725.698.631-90'],
			[true, '960.299.051-12'],
			[true, '181.991.378-35'],
			[true, '898.819.063-77'],
			[true, '567.398.152-08'],
			[true, '469.227.968-02'],
			[true, '185.995.694-73'],
			[true, '940.792.772-53'],
			[true, '159.481.027-34'],
			[true, '267.029.142-29'],
			[true, '896.475.701-71'],
			[true, '608.596.180-48'],
			[true, '245.252.395-06'],
			[true, '315.949.657-06'],
			[true, '163.168.476-02'],
			[true, '191.760.188-30'],
			[true, '934.688.826-10'],
			[true, '807.420.391-37'],
			[true, '221.697.983-07'],
			[true, '083.355.975-37'],
			[true, '274.311.334-05'],
			[true, '549.981.232-20'],
			[true, '562.920.462-90'],
			[true, '791.963.313-30'],
			[true, '893.860.566-31'],
			[true, '464.592.775-24'],
			[true, '950.204.393-63'],
			[true, '949.468.143-61'],
			[true, '295.729.181-92'],
			[true, '41779611161'],
			[true, '18428741018'],
			[true, '22450235795'],
			[true, '97599698663'],
			[true, '96510995778'],
			[true, '01379815460'],
			[true, '70517970341'],
			[true, '01426299796'],
			[true, '28077322085'],
			[true, '90647370530'],
			[true, '02446337384'],
			[true, '11559270799'],
			[true, '25618063328'],
			[true, '50921914490'],
			[true, '45005833510'],
			[true, '98185433860'],
			[true, '47266140960'],
			[true, '29243396340'],
			[true, '41945071770'],
			[true, '66196594974'],
			[true, '53599028761'],
			[true, '56254718510'],
			[true, '72678990486'],
			[true, '44746528438'],
			[true, '07017770609'],
			[true, '61698356560'],
			[true, '94075672816'],
			[true, '95197457694'],
			[true, '54439037801'],
			[true, '54881842609'],
			[true, '19617289075'],
			[true, '17086868868'],
			[true, '61537125338'],
			[true, '27028276244'],
			[true, '79946228874'],
			[true, '52672776229'],
			[true, '42036408141'],
			[true, '05556414220'],
			[true, '20423504860'],
			[true, '14675584942'],
			[true, '99793618590'],
			[true, '49354266754'],
			[true, '54081519803'],
			[true, '29109848932'],
			[true, '35356649347'],
			[true, '62791297219'],
			[true, '00282968261'],
			[true, '09831374550'],
			[true, '48048109603'],
			[true, '28707938713'],
			[true, '250.427433-59'],
			[true, '650.771239-69'],
			[true, '353.553782-77'],
			[true, '683.714474-00'],
			[true, '611.530792-91'],
			[true, '715.980504-60'],
			[true, '543336.002-43'],
			[true, '002215.516-38'],
			[true, '801.941494-04'],
			[true, '733.761096-30'],
			[true, '260231.416-17'],
			[true, '291222.814-01'],
			[true, '976.902.06999'],
			[true, '422.892.04706'],
			[true, '667.089.03970'],
			[true, '373.773754-18'],
			[true, '280.113.13266'],
			[true, '503595.969-40'],
			[true, '085293.127-16'],
			[true, '399973.153-24'],
			[true, '526.588727-04'],
			[true, '953.449.14113'],
			[true, '924.165425-24'],
			[true, '754.998.64608'],
			[true, '522.470191-02'],
			[true, '420.802.79327'],
			[true, '309.142200-39'],
			[true, '098.687473-68'],
			[true, '194.530717-06'],
			[true, '816877.122-20'],
			[true, '081.334.78820'],
			[true, '579.194437-33'],
			[true, '117746.296-66'],
			[true, '228169.577-80'],
			[true, '803667.218-95'],
			[true, '770.911769-44'],
			[true, '980.844011-81'],
			[true, '181.653.25922'],
			[true, '627459.077-35'],
			[true, '393680.313-71'],
			[true, '635.358832-10'],
			[true, '445217.316-00'],
			[true, '783492.954-22'],
			[true, '938927.183-50'],
			[true, '299630.526-49'],
			[true, '833.052883-96'],
			[true, '022.981.44923'],
			[true, '385.704564-76'],
			[true, '240879.236-30'],
			[true, '372.353193-80'],
			// Invalid
			[false, '72586202777'],
			[false, '81612473823'],
			[false, '44271953753'],
			[false, '87310966785'],
			[false, '97081948529'],
			[false, '43516157478'],
			[false, '11814014688'],
			[false, '55139518124'],
			[false, '20429640917'],
			[false, '80309888147'],
			[false, '82417037846'],
			[false, '12912907260'],
			[false, '39389557243'],
			[false, '91631208531'],
			[false, '85147712512'],
			[false, '13815465037'],
			[false, '71938650513'],
			[false, '90982877911'],
			[false, '28785794749'],
			[false, '63506168799'],
			[false, '49815932998'],
			[false, '08976770172'],
			[false, '92349453108'],
			[false, '19045203568'],
			[false, '16841446270'],
			[false, '38524862173'],
			[false, '40250584490'],
			[false, '23798243886'],
			[false, '99357979250'],
			[false, '39203444820'],
			[false, '09086339285'],
			[false, '47198972953'],
			[false, '64584130853'],
			[false, '73017026363'],
			[false, '06727369304'],
			[false, '54917969046'],
			[false, '45379813343'],
			[false, '95604195675'],
			[false, '44298415573'],
			[false, '60260679165'],
			[false, '91719821762'],
			[false, '43074689432'],
			[false, '70623243018'],
			[false, '47265624072'],
			[false, '32601935285'],
			[false, '95139700617'],
			[false, '35067516686'],
			[false, '31027505880'],
			[false, '64745125374'],
			[false, '97291338690'],
		];
   }

	/**
	 * A list with random values to mask.
	 * Provider to canMask() method.
	 * - Generated by fakerphp.
	 * @return array
	 */
	public function dataToMask () : array
	{
		return [
			['7474******3','747.432.042-83'],
			['4032******2','403.256.285-72'],
			['5281******0','528.169.334-40'],
			['6352******5','635.268.692-35'],
			['8254******0','825.486.075-00'],
			['3868******0','386.804.817-00'],
			['8412******2','841.258.505-42'],
			['1094******1','109.448.694-91'],
			['0387******4','038.716.066-34'],
			['5202******1','520.268.912-81'],
			['9566******3','956.675.118-43'],
			['7692******7','769.206.871-27'],
			['3193******3','319.365.061-73'],
			['6740******3','674.058.987-93'],
			['8018******8','801.854.072-18'],
			['4516******4','451.654.602-74'],
			['7192******1','719.259.720-11'],
			['8387******7','838.736.228-07'],
			['5533******0','553.343.467-40'],
			['1371******0','137.102.682-30'],
			['2268******3','226.889.958-63'],
			['4952******9','495.224.292-79'],
			['8995******3','899.593.784-03'],
			['5367******5','536.742.124-55'],
			['3252******7','325.273.533-47'],
			['1858******0','185.896.404-00'],
			['5152******5','515.275.829-65'],
			['6160******1','616.076.615-51'],
			['4753******9','475.331.123-69'],
			['5097******5','509.752.882-45'],
			['6586******0','658.688.463-20'],
			['3231******1','323.172.963-71'],
			['7906******4','790.675.424-74'],
			['8471******1','847.122.485-21'],
			['5046******2','504.676.441-52'],
			['4399******0','439.900.491-60'],
			['7127******8','712.741.274-08'],
			['7634******0','763.487.944-40'],
			['9321******7','932.109.434-27'],
			['0559******6','055.983.699-66'],
			['9439******5','943.936.750-45'],
			['9070******7','907.094.631-97'],
			['9682******5','968.284.749-45'],
			['4786******4','478.614.318-94'],
			['5995******1','599.549.638-71'],
			['7967******3','796.731.025-03'],
			['9159******4','915.942.009-04'],
			['1187******3','118.757.647-63'],
			['4741******6','474.163.461-26'],
			['7579******5','757.918.187-85'],
			['4336*9','433.695.534-49', false],
			['2593*6','259.387.504-66', false],
			['5083*4','508.386.539-44', false],
			['5539*2','553.903.375-22', false],
			['6126*0','612.655.465-50', false],
			['1434*5','143.446.643-45', false],
			['8846*8','884.653.843-98', false],
			['4863*1','486.366.406-01', false],
			['1644*5','164.432.617-55', false],
			['9413*4','941.316.215-84', false],
			['7284*6','728.417.397-16', false],
			['6763*4','676.354.314-04', false],
			['4542*7','454.252.761-17', false],
			['4985*8','498.557.763-48', false],
			['9663*0','966.373.447-70', false],
			['8354*4','835.415.809-84', false],
			['8893*9','889.328.283-69', false],
			['5299*4','529.995.259-74', false],
			['0488*4','048.877.844-14', false],
			['6763*0','676.369.987-50', false],
			['0738*0','073.875.563-00', false],
			['9803*2','980.340.588-82', false],
			['2752*7','275.214.091-67', false],
			['3768*9','376.863.348-99', false],
			['9170*2','917.099.844-22', false],
			['6791*0','679.194.517-60', false],
			['0852*1','085.227.642-71', false],
			['4657*6','465.778.092-16', false],
			['0886*7','088.663.074-67', false],
			['5459*0','545.930.642-60', false],
			['7430*5','743.022.587-05', false],
			['5425*6','542.550.119-66', false],
			['2884*3','288.492.237-73', false],
			['2511*5','251.197.200-05', false],
			['1993*5','199.378.430-65', false],
			['5261*1','526.168.806-01', false],
			['3765*1','376.502.437-61', false],
			['2863*7','286.373.945-07', false],
			['2758*2','275.884.734-52', false],
			['2427*5','242.749.296-55', false],
			['8552*4','855.205.966-54', false],
			['0178*3','017.841.103-53', false],
			['0348*0','034.844.724-80', false],
			['7968*3','796.860.389-73', false],
			['9504*0','950.474.516-40', false],
			['9015*0','901.548.056-70', false],
			['7609*4','760.970.800-34', false],
			['6203*6','620.398.405-16', false],
			['5623*2','562.373.499-52', false],
			['4857*4','485.706.478-24', false],
		];
   }
}