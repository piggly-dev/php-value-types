<?php
namespace Piggly\Tests\ValueTypes\Advanced;

use PHPUnit\Framework\TestCase;
use Piggly\ValueTypes\Advanced\CnpjType;

/**
 * @coversDefaultClass \Piggly\ValueTypes\Advanced\CnpjType
 */
class CnpjTypeTest extends TestCase
{
	/**
	 * Assert if $value is validated as $expected.
	 *
	 * @covers ::validate
	 * @covers ::assert
	 * @covers ::__construct
	 * @dataProvider dataValues
	 * @test Expecting positive assertion.
	 * @param boolean $expected Expected result.
	 * @param boolean $value Value to validate
	 * @return boolean
	 */
	public function canValidate ( bool $expected, string $value )
	{ $this->assertEquals($expected, (new CnpjType($value))->validate()); }

	/**
	 * Assert if $value is masked as $expected.
	 *
	 * @covers ::masked
	 * @covers ::__construct
	 * @dataProvider dataToMask
	 * @test Expecting positive assertion.
	 * @param string $expected Expected result.
	 * @param string $value Value to validate
	 * @return boolean
	 */
	public function canMask ( string $expected, string $value, bool $keepLenght = true )
	{ $this->assertEquals($expected, (new CnpjType($value))->masked($keepLenght)); }

	/**
	 * A list with random values to validate.
	 * Provider to canValidate() method.
	 * - Generated by fakerphp.
	 * @return array
	 */
	public function dataValues () : array
	{
		return [
			// Must match dataset
			// CNPJ
			[true, '95.296.300/0001-76'],
			[true, '83.102.003/0001-63'],
			[true, '63.211.824/0001-20'],
			[true, '45.909.896/0001-64'],
			[true, '24.042.402/0001-17'],
			[true, '11.122.349/0001-12'],
			[true, '20.022.831/0001-71'],
			[true, '24.759.567/0001-04'],
			[true, '51.445.614/0001-18'],
			[true, '35.676.365/0001-15'],
			[true, '01.135.736/0001-30'],
			[true, '51.725.237/0001-70'],
			[true, '88.544.984/0001-12'],
			[true, '16.732.953/0001-84'],
			[true, '80.653.208/0001-49'],
			[true, '66.944.103/0001-18'],
			[true, '36.847.779/0001-22'],
			[true, '36.796.005/0001-10'],
			[true, '89.321.776/0001-17'],
			[true, '82.255.841/0001-04'],
			[true, '37.546.885/0001-39'],
			[true, '19.608.781/0001-20'],
			[true, '31.762.931/0001-50'],
			[true, '86.874.305/0001-48'],
			[true, '20.710.641/0001-47'],
			[true, '83.471.432/0001-08'],
			[true, '59.865.496/0001-09'],
			[true, '43.618.723/0001-61'],
			[true, '24.650.586/0001-06'],
			[true, '33.073.207/0001-45'],
			[true, '11.714.116/0001-09'],
			[true, '11.378.145/0001-47'],
			[true, '27.053.817/0001-84'],
			[true, '55.401.637/0001-81'],
			[true, '78.626.310/0001-03'],
			[true, '48.413.495/0001-07'],
			[true, '44.142.550/0001-10'],
			[true, '24.059.631/0001-44'],
			[true, '74.839.760/0001-23'],
			[true, '55.347.465/0001-05'],
			[true, '14.341.458/0001-19'],
			[true, '77.421.952/0001-03'],
			[true, '54.377.367/0001-58'],
			[true, '23.008.361/0001-80'],
			[true, '21.605.529/0001-09'],
			[true, '27.859.255/0001-60'],
			[true, '48.856.145/0001-15'],
			[true, '32.138.063/0001-03'],
			[true, '63.948.910/0001-10'],
			[true, '88.372.562/0001-07'],
			[true, '24139494000158'],
			[true, '24096722000150'],
			[true, '50841801000158'],
			[true, '04076657000193'],
			[true, '96355994000138'],
			[true, '42723798000140'],
			[true, '24194689000109'],
			[true, '16465135000162'],
			[true, '61335108000120'],
			[true, '91901728000140'],
			[true, '98367535000108'],
			[true, '72869196000166'],
			[true, '93315782000139'],
			[true, '96541444000103'],
			[true, '54018331000188'],
			[true, '24045989000118'],
			[true, '03216297000115'],
			[true, '95571489000168'],
			[true, '31756686000179'],
			[true, '53705402000158'],
			[true, '58653788000115'],
			[true, '37936370000145'],
			[true, '72164703000166'],
			[true, '24736758000150'],
			[true, '02796201000172'],
			[true, '36743277000151'],
			[true, '22258702000102'],
			[true, '63623009000179'],
			[true, '89139644000179'],
			[true, '98561480000164'],
			[true, '06974265000177'],
			[true, '74295402000105'],
			[true, '67885120000194'],
			[true, '88388627000102'],
			[true, '08353235000179'],
			[true, '32663927000106'],
			[true, '81865641000100'],
			[true, '83202546000152'],
			[true, '74146740000177'],
			[true, '36066715000194'],
			[true, '47486093000170'],
			[true, '28506937000152'],
			[true, '31886603000166'],
			[true, '98722829000100'],
			[true, '20571886000130'],
			[true, '87915813000190'],
			[true, '18086042000152'],
			[true, '03792934000100'],
			[true, '81020033000103'],
			[true, '24801422000124'],
			[true, '78.539.370/000199'],
			[true, '47.201.958/000104'],
			[true, '62.535174/0001-06'],
			[true, '03.919.7760001-06'],
			[true, '28.955.581/000134'],
			[true, '78.412.204/000127'],
			[true, '16.056.287/000101'],
			[true, '16.503047/0001-08'],
			[true, '43.775.1570001-00'],
			[true, '54.279548/0001-41'],
			[true, '63.885.594/000185'],
			[true, '47.291.0850001-78'],
			[true, '54.022341/0001-97'],
			[true, '94.306.0320001-63'],
			[true, '64.411.433/000112'],
			[true, '75829.999/0001-85'],
			[true, '86.443.5790001-82'],
			[true, '33.573541/0001-68'],
			[true, '47.587134/0001-14'],
			[true, '65.941.010/000177'],
			[true, '83.028653/0001-06'],
			[true, '62.432536/0001-33'],
			[true, '22.509.0870001-60'],
			[true, '54.924789/0001-04'],
			[true, '74.445.7400001-78'],
			[true, '88.605283/0001-46'],
			[true, '86955.855/0001-91'],
			[true, '72373.125/0001-78'],
			[true, '38.458.8150001-91'],
			[true, '59.409712/0001-01'],
			[true, '29826.713/0001-90'],
			[true, '31.822.010/000136'],
			[true, '52.099788/0001-39'],
			[true, '07.189.3190001-56'],
			[true, '44.739.196/000106'],
			[true, '13.993.367/000103'],
			[true, '66125.995/0001-25'],
			[true, '03093.115/0001-66'],
			[true, '63127.640/0001-87'],
			[true, '86.084205/0001-18'],
			[true, '63.845.941/000146'],
			[true, '26.124.9850001-50'],
			[true, '40.635369/0001-95'],
			[true, '75.636742/0001-07'],
			[true, '24.465.780/000103'],
			[true, '10.977.118/000128'],
			[true, '46.077.000/000190'],
			[true, '89693.767/0001-57'],
			[true, '18.293783/0001-04'],
			[true, '82663.954/0001-49'],
			// Must not match dataset
			// CNPJ
			[false, '39484341348596'],
			[false, '02075164172747'],
			[false, '79537905668250'],
			[false, '63267877400743'],
			[false, '80364193180839'],
			[false, '82241205738198'],
			[false, '12637960301913'],
			[false, '20469362896000'],
			[false, '08024616923279'],
			[false, '69039361143238'],
			[false, '71720374965335'],
			[false, '52154842487821'],
			[false, '02758742406607'],
			[false, '58865634972707'],
			[false, '63211841031338'],
			[false, '94138562095150'],
			[false, '06566050995591'],
			[false, '01297678590130'],
			[false, '94075457641002'],
			[false, '45124178042817'],
			[false, '43957971973121'],
			[false, '72891434285556'],
			[false, '10367479348542'],
			[false, '64308935791313'],
			[false, '24690537393640'],
			[false, '35371639481704'],
			[false, '70432695957323'],
			[false, '71444903496255'],
			[false, '16360225241903'],
			[false, '78054306152937'],
			[false, '22178671151035'],
			[false, '45217683788660'],
			[false, '43223714862301'],
			[false, '01094921498314'],
			[false, '41735397140928'],
			[false, '61427335482182'],
			[false, '13872290960471'],
			[false, '97112742683513'],
			[false, '33782071462348'],
			[false, '93014855491651'],
			[false, '60152926244057'],
			[false, '28995421776255'],
			[false, '09065066257639'],
			[false, '04096246113858'],
			[false, '04977807746089'],
			[false, '73990312254638'],
			[false, '65071892492324'],
			[false, '51812368579963'],
			[false, '27664045740338'],
			[false, '80288570222052'],
		];
   }

	/**
	 * A list with random values to mask.
	 * Provider to canMask() method.
	 * - Generated by fakerphp.
	 * @return array
	 */
	public function dataToMask () : array
	{
		return [
			['28653*******84','28.653.630/0001-84'],
			['94152*******82','94.152.213/0001-82'],
			['84510*******43','84.510.007/0001-43'],
			['62607*******87','62.607.341/0001-87'],
			['53282*******37','53.282.918/0001-37'],
			['77120*******53','77.120.297/0001-53'],
			['12887*******43','12.887.697/0001-43'],
			['07803*******10','07.803.763/0001-10'],
			['24322*******18','24.322.555/0001-18'],
			['68771*******86','68.771.793/0001-86'],
			['07716*******37','07.716.970/0001-37'],
			['23878*******34','23.878.890/0001-34'],
			['45468*******68','45.468.425/0001-68'],
			['19430*******48','19.430.210/0001-48'],
			['42117*******04','42.117.445/0001-04'],
			['54671*******45','54.671.233/0001-45'],
			['33816*******97','33.816.091/0001-97'],
			['46337*******35','46.337.715/0001-35'],
			['98399*******61','98.399.465/0001-61'],
			['03864*******73','03.864.650/0001-73'],
			['03549*******64','03.549.189/0001-64'],
			['33479*******54','33.479.572/0001-54'],
			['81974*******47','81.974.553/0001-47'],
			['43675*******38','43.675.518/0001-38'],
			['80905*******03','80.905.194/0001-03'],
			['31850*******06','31.850.794/0001-06'],
			['43291*******25','43.291.446/0001-25'],
			['50760*******76','50.760.633/0001-76'],
			['86729*******20','86.729.050/0001-20'],
			['97547*******59','97.547.785/0001-59'],
			['74872*******10','74.872.152/0001-10'],
			['02900*******30','02.900.431/0001-30'],
			['36135*******96','36.135.971/0001-96'],
			['27936*******45','27.936.796/0001-45'],
			['78102*******64','78.102.126/0001-64'],
			['81370*******80','81.370.970/0001-80'],
			['26396*******52','26.396.383/0001-52'],
			['51171*******67','51.171.750/0001-67'],
			['43151*******50','43.151.218/0001-50'],
			['76372*******31','76.372.955/0001-31'],
			['25347*******60','25.347.729/0001-60'],
			['54546*******55','54.546.067/0001-55'],
			['63328*******52','63.328.896/0001-52'],
			['41067*******02','41.067.471/0001-02'],
			['98847*******82','98.847.659/0001-82'],
			['26662*******75','26.662.446/0001-75'],
			['89132*******76','89.132.977/0001-76'],
			['92932*******88','92.932.684/0001-88'],
			['18504*******21','18.504.613/0001-21'],
			['92928*******98','92.928.448/0001-98'],
			['01643*77','01.643.089/0001-77', false],
			['25061*31','25.061.506/0001-31', false],
			['05133*41','05.133.449/0001-41', false],
			['48724*03','48.724.148/0001-03', false],
			['96842*59','96.842.259/0001-59', false],
			['37925*21','37.925.208/0001-21', false],
			['87774*32','87.774.591/0001-32', false],
			['36687*66','36.687.337/0001-66', false],
			['44499*80','44.499.887/0001-80', false],
			['59319*33','59.319.349/0001-33', false],
			['62520*00','62.520.781/0001-00', false],
			['99072*68','99.072.610/0001-68', false],
			['54394*37','54.394.891/0001-37', false],
			['18434*62','18.434.635/0001-62', false],
			['56637*57','56.637.628/0001-57', false],
			['37566*80','37.566.462/0001-80', false],
			['43166*13','43.166.001/0001-13', false],
			['27286*40','27.286.242/0001-40', false],
			['02007*27','02.007.276/0001-27', false],
			['10091*21','10.091.492/0001-21', false],
			['36038*96','36.038.287/0001-96', false],
			['90534*08','90.534.805/0001-08', false],
			['72047*35','72.047.999/0001-35', false],
			['94944*64','94.944.969/0001-64', false],
			['14009*02','14.009.532/0001-02', false],
			['47198*09','47.198.554/0001-09', false],
			['75629*09','75.629.361/0001-09', false],
			['02208*16','02.208.697/0001-16', false],
			['33423*37','33.423.036/0001-37', false],
			['96609*19','96.609.306/0001-19', false],
			['96875*50','96.875.523/0001-50', false],
			['02738*30','02.738.511/0001-30', false],
			['30272*92','30.272.075/0001-92', false],
			['57881*59','57.881.757/0001-59', false],
			['04987*58','04.987.581/0001-58', false],
			['74285*52','74.285.638/0001-52', false],
			['27336*11','27.336.265/0001-11', false],
			['89749*40','89.749.668/0001-40', false],
			['01491*44','01.491.971/0001-44', false],
			['83093*21','83.093.568/0001-21', false],
			['48762*11','48.762.865/0001-11', false],
			['69314*36','69.314.253/0001-36', false],
			['93065*71','93.065.991/0001-71', false],
			['53198*53','53.198.241/0001-53', false],
			['66133*60','66.133.154/0001-60', false],
			['67543*20','67.543.783/0001-20', false],
			['09708*09','09.708.477/0001-09', false],
			['54789*90','54.789.837/0001-90', false],
			['57053*75','57.053.699/0001-75', false],
			['42823*45','42.823.312/0001-45', false],
		];
   }
}