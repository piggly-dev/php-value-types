<?php
namespace Piggly\Tests\ValueTypes\Advanced;

use PHPUnit\Framework\TestCase;
use Piggly\ValueTypes\Advanced\CnhType;

/**
 * @coversDefaultClass \Piggly\ValueTypes\Advanced\CnhType
 */
class CnhTypeTest extends TestCase
{
	/**
	 * Assert if $value is validated as $expected.
	 *
	 * @covers ::validate
	 * @covers ::assert
	 * @covers ::__construct
	 * @dataProvider dataValues
	 * @test Expecting positive assertion.
	 * @param boolean $expected Expected result.
	 * @param boolean $value Value to validate
	 * @return boolean
	 */
	public function canValidate ( bool $expected, string $value )
	{ $this->assertEquals($expected, (new CnhType($value))->validate()); }

	/**
	 * Assert if $value is masked as $expected.
	 *
	 * @covers ::masked
	 * @covers ::__construct
	 * @dataProvider dataToMask
	 * @test Expecting positive assertion.
	 * @param string $expected Expected result.
	 * @param string $value Value to validate
	 * @return boolean
	 */
	public function canMask ( string $expected, string $value, bool $keepLenght = true )
	{ $this->assertEquals($expected, (new CnhType($value))->masked($keepLenght)); }

	/**
	 * A list with random values to validate.
	 * Provider to canValidate() method.
	 * - Generated by fakerphp.
	 * @return array
	 */
	public function dataValues () : array
	{
		return [			
			// Valid
			[true,'745969498-23'],
			[true,'034736792-95'],
			[true,'505969516-36'],
			[true,'972751058-92'],
			[true,'895245317-74'],
			[true,'302405585-01'],
			[true,'110187148-02'],
			[true,'696538262-17'],
			[true,'122569443-44'],
			[true,'440287182-44'],
			[true,'096401155-67'],
			[true,'326190371-66'],
			[true,'949196716-59'],
			[true,'633016425-68'],
			[true,'032793945-11'],
			[true,'339381159-02'],
			[true,'271726331-84'],
			[true,'926328151-43'],
			[true,'925561774-45'],
			[true,'035968146-58'],
			[true,'925859277-48'],
			[true,'766407417-67'],
			[true,'137584517-59'],
			[true,'558880686-57'],
			[true,'876090793-42'],
			[true,'950561895-16'],
			[true,'032860978-01'],
			[true,'441840244-76'],
			[true,'790438570-48'],
			[true,'133545438-71'],
			[true,'914181574-22'],
			[true,'306716793-67'],
			[true,'718368152-21'],
			[true,'826537735-45'],
			[true,'685595351-44'],
			[true,'703509584-95'],
			[true,'685885812-31'],
			[true,'812330798-95'],
			[true,'146493609-49'],
			[true,'930633820-91'],
			[true,'787807424-80'],
			[true,'709795533-43'],
			[true,'983149949-82'],
			[true,'626063284-43'],
			[true,'002597262-56'],
			[true,'012362542-44'],
			[true,'761219168-67'],
			// Invalid
			[false,'505508256-09'],
			[false,'688319172-00'],
			[false,'732451751-00'],
			[false,'033665159-07'],
			[false,'142465934-01'],
			[false,'819300240-79'],
			[false,'677609733-49'],
			[false,'010705853-45'],
			[false,'204659545-81'],
			[false,'092651132-08'],
			[false,'746754423-02'],
			[false,'326156197-99'],
			[false,'622912751-21'],
			[false,'665335657-53'],
			[false,'770249265-18'],
			[false,'707022600-89'],
			[false,'917611907-77'],
			[false,'096222134-57'],
			[false,'807197115-07'],
			[false,'413658205-97'],
			[false,'673607800-29'],
			[false,'822803382-44'],
			[false,'937891933-81'],
			[false,'257609520-01'],
			[false,'360335748-54'],
			[false,'857383865-28'],
			[false,'940072045-45'],
			[false,'948374667-68'],
			[false,'049184368-18'],
			[false,'527832211-66'],
			[false,'365906976-53'],
			[false,'836933126-31'],
			[false,'852093613-51'],
			[false,'868194897-64'],
			[false,'194240959-18'],
			[false,'284412716-97'],
			[false,'456991700-37'],
			[false,'865517740-23'],
			[false,'613977631-01'],
			[false,'457049530-71'],
			[false,'235918805-09'],
			[false,'276959790-57'],
			[false,'340155764-60'],
			[false,'887821431-12'],
			[false,'993314989-48'],
			[false,'182072588-51'],
			[false,'400029687-80'],
			[false,'114658053-40'],
			[false,'132440285-98'],
			[false,'042551927-26'],
			[false,'353404275-48'],
			[false,'922730990-26'],
			[false,'336179431-92'],
		];
   }

	/**
	 * A list with random values to mask.
	 * Provider to canMask() method.
	 * - Generated by fakerphp.
	 * @return array
	 */
	public function dataToMask () : array
	{
		return [
			['8827******2','882725715-82'],
			['5336******1','533636597-71'],
			['9043******6','904303930-76'],
			['4161******4','416190282-74'],
			['1402******7','140219184-77'],
			['7776******0','777660884-30'],
			['9907******6','990727709-06'],
			['0479******3','047944284-03'],
			['2081******0','208170790-00'],
			['1944******5','194422819-05'],
			['0493******1','049307837-21'],
			['3474******0','347490566-10'],
			['5229******5','522933922-25'],
			['9803******8','980312502-68'],
			['2846******5','284663884-15'],
			['3166******0','316682703-90'],
			['8138******4','813849806-44'],
			['4095******2','409558085-92'],
			['3676******6','367659703-36'],
			['5344******4','534419194-04'],
			['1028******5','102888202-85'],
			['3099******7','309922307-27'],
			['2424******4','242495405-54'],
			['9009******8','900920444-48'],
			['8688******6','868869367-06'],
			['9915******6','991589888-66'],
			['4115******6','411502855-76'],
			['9494******8','949415859-48'],
			['9366******0','936639896-70'],
			['6832******3','683247392-83'],
			['9343******1','934396156-81'],
			['6175******4','617500135-14'],
			['8255******8','825549217-48'],
			['0712******0','071276911-00'],
			['3000******2','300027643-62'],
			['9496******1','949616156-71'],
			['9273******6','927390276-46'],
			['4209******7','420935767-57'],
			['8831******7','883103906-07'],
			['9905******3','990504497-53'],
			['4759******4','475965338-14'],
			['7386******1','738613700-81'],
			['7667******0','766763503-20'],
			['3513******6','351339248-06'],
			['6936******3','693621758-53'],
			['8962******0','896209553-90'],
			['2189******4','218918430-44'],
			['3678******5','367899603-05'],
			['6416******0','641675320-00'],
			['3119******0','311940500-00'],
			['8797*9','879742975-09', false],
			['7221*5','722163075-65', false],
			['5714*2','571448784-52', false],
			['0871*8','087161489-38', false],
			['5744*3','574476266-53', false],
			['7935*7','793594583-67', false],
			['1269*8','126934516-08', false],
			['3460*7','346029853-87', false],
			['3379*0','337985002-70', false],
			['3341*5','334183586-95', false],
			['0931*2','093188513-42', false],
			['8387*0','838759094-20', false],
			['7227*1','722712292-91', false],
			['2316*9','231679154-89', false],
			['8673*9','867334714-39', false],
			['6699*9','669998675-39', false],
			['2858*5','285893550-55', false],
			['6159*0','615909668-50', false],
			['8823*4','882382029-94', false],
			['9365*4','936535339-54', false],
			['2645*6','264561781-96', false],
			['8620*8','862083618-58', false],
			['2435*4','243566564-04', false],
			['4978*6','497856707-76', false],
			['7281*7','728171852-77', false],
			['8425*3','842573050-73', false],
			['8008*0','800848531-70', false],
			['9786*2','978654794-52', false],
			['3788*9','378816616-09', false],
			['5363*2','536361335-72', false],
			['5381*5','538175238-85', false],
			['4209*8','420914120-28', false],
			['4132*9','413216563-49', false],
			['3808*7','380833305-47', false],
			['4570*7','457032045-77', false],
			['7624*4','762415616-24', false],
			['8571*7','857105577-37', false],
			['9826*1','982648734-31', false],
			['7845*9','784567939-09', false],
			['4295*0','429551416-70', false],
			['2724*6','272491924-96', false],
			['9269*1','926920165-31', false],
			['8752*2','875202336-62', false],
			['6651*1','665155606-31', false],
			['9379*3','937936439-03', false],
			['0000*1','000059488-91', false],
			['3042*0','304297801-00', false],
			['4909*5','490982230-25', false],
			['1010*0','101017074-10', false],
			['3092*9','309277043-09', false],
		];
   }
}